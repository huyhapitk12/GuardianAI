# GuardianAI - H·ªá th·ªëng Gi√°m s√°t An ninh Th√¥ng minh

**GuardianAI** l√† m·ªôt gi·∫£i ph√°p an ninh to√†n di·ªán, m√£ ngu·ªìn m·ªü, s·ª≠ d·ª•ng Tr√≠ tu·ªá Nh√¢n t·∫°o (AI) v√† Th·ªã gi√°c M√°y t√≠nh (Computer Vision) ƒë·ªÉ gi√°m s√°t, ph√°t hi·ªán v√† c·∫£nh b√°o c√°c m·ªëi ƒëe d·ªça trong th·ªùi gian th·ª±c. H·ªá th·ªëng ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ ho·∫°t ƒë·ªông 24/7, b·∫£o v·ªá ng√¥i nh√† ho·∫∑c c∆° s·ªü c·ªßa b·∫°n kh·ªèi c√°c nguy c∆° nh∆∞ ch√°y n·ªï v√† x√¢m nh·∫≠p tr√°i ph√©p, v·ªõi kh·∫£ nƒÉng t∆∞∆°ng t√°c v√† ƒëi·ªÅu khi·ªÉn th√¥ng minh qua Telegram.

## ‚ú® T√≠nh nƒÉng n·ªïi b·∫≠t

### üõ°Ô∏è Ch·ª©c nƒÉng C·ªët l√µi (Ho·∫°t ƒë·ªông ƒë·ªôc l·∫≠p)
- **Ph√°t hi·ªán Ch√°y & Kh√≥i:** S·ª≠ d·ª•ng model **YOLOv8/YOLO11** ƒë·ªÉ ph√°t hi·ªán l·ª≠a v√† kh√≥i v·ªõi ƒë·ªô ch√≠nh x√°c cao.
- **Ph√°t hi·ªán & Nh·∫≠n di·ªán Ng∆∞·ªùi:** Ph√¢n bi·ªát gi·ªØa "Ng∆∞·ªùi quen" v√† "Ng∆∞·ªùi l·∫°" b·∫±ng model **InsightFace**.
- **C·∫£nh b√°o Th√¥ng minh qua Telegram:** G·ª≠i c·∫£nh b√°o t·ª©c th√¨ k√®m h√¨nh ·∫£nh/video khi ph√°t hi·ªán s·ª± ki·ªán.
- **T∆∞∆°ng t√°c Tr·ª±c quan:** Ng∆∞·ªùi d√πng c√≥ th·ªÉ x√°c nh·∫≠n "Ch√°y th·∫≠t" / "B√°o ƒë·ªông gi·∫£" qua c√°c n√∫t b·∫•m tr√™n Telegram.
- **K√≠ch ho·∫°t C√≤i b√°o ƒë·ªông:** T·ª± ƒë·ªông h√∫ c√≤i khi c√≥ c·∫£nh b√°o kh·∫©n c·∫•p ho·∫∑c khi ng∆∞·ªùi d√πng ra l·ªánh.
- **Ghi h√¨nh S·ª± ki·ªán:** T·ª± ƒë·ªông quay l·∫°i video clip c·ªßa s·ª± ki·ªán v√† g·ª≠i cho ng∆∞·ªùi d√πng.
- **Giao di·ªán Qu·∫£n l√Ω (GUI):** Giao di·ªán ƒë·ªì h·ªça tr·ª±c quan ƒë·ªÉ d·ªÖ d√†ng qu·∫£n l√Ω c∆° s·ªü d·ªØ li·ªáu khu√¥n m·∫∑t ng∆∞·ªùi quen.
- **ƒêi·ªÅu khi·ªÉn b·∫±ng L·ªánh:** H·ªó tr·ª£ c√°c l·ªánh ƒë·ªÉ ƒëi·ªÅu khi·ªÉn h·ªá th·ªëng ngay c·∫£ khi AI kh√¥ng ho·∫°t ƒë·ªông: `/alarm_on`, `/get_image`, `/get_image`, `/detect`

### üß† Ch·ª©c nƒÉng N√¢ng cao (T√≠ch h·ª£p AI linh ho·∫°t)
- **H·ªó tr·ª£ ƒëa n·ªÅn t·∫£ng AI:** D·ªÖ d√†ng chuy·ªÉn ƒë·ªïi gi·ªØa **Google Gemini** v√† b·∫•t k·ª≥ **API n√†o t∆∞∆°ng th√≠ch OpenAI** (bao g·ªìm OpenAI ch√≠nh th·ª©c, c√°c m√¥ h√¨nh self-host nh∆∞ LM Studio, Ollama).
- **Ph√¢n t√≠ch Ph·∫£n h·ªìi b·∫±ng AI:** Hi·ªÉu ng√¥n ng·ªØ t·ª± nhi√™n c·ªßa ng∆∞·ªùi d√πng ƒë·ªÉ x√°c nh·∫≠n c·∫£nh b√°o (v√≠ d·ª•: "kh√¥ng ph·∫£i ng∆∞·ªùi l·∫° ƒë√¢u" -> h·ªá th·ªëng s·∫Ω hi·ªÉu v√† b·ªè qua).
- **ƒêi·ªÅu khi·ªÉn b·∫±ng Ng√¥n ng·ªØ T·ª± nhi√™n:** Ra l·ªánh cho h·ªá th·ªëng b·∫±ng c√°c c√¢u n√≥i th√¥ng th∆∞·ªùng nh∆∞ "b·∫≠t c√≤i b√°o ƒë·ªông l√™n" hay "cho xem camera".
- **Tr·ª£ l√Ω AI:** Tr√≤ chuy·ªán v√† tr·∫£ l·ªùi c√°c c√¢u h·ªèi kh√°c c·ªßa ng∆∞·ªùi d√πng.

## üõ†Ô∏è H∆∞·ªõng d·∫´n C√†i ƒë·∫∑t & V·∫≠n h√†nh

Th·ª±c hi·ªán theo c√°c b∆∞·ªõc d∆∞·ªõi ƒë√¢y ƒë·ªÉ c√†i ƒë·∫∑t v√† kh·ªüi ch·∫°y h·ªá th·ªëng GuardianAI tr√™n m√°y c·ªßa b·∫°n.

### B∆∞·ªõc 1: Y√™u c·∫ßu H·ªá th·ªëng
- **H·ªá ƒëi·ªÅu h√†nh:** Windows 10/11, Ubuntu 20.04+ (khuy·∫øn ngh·ªã)
- **Ph·∫ßn m·ªÅm:**
  - **Python 3.10 tr·ªü l√™n:** [T·∫£i Python](https://www.python.org/downloads/).
  - **Git:** [T·∫£i Git](https://git-scm.com/downloads/)

### B∆∞·ªõc 2: T·∫£i M√£ ngu·ªìn
M·ªü Terminal (ho·∫∑c Command Prompt/PowerShell tr√™n Windows) v√† ch·∫°y l·ªánh sau:
```bash
git clone https://github.com/huyhapitk12/GuardianAI.git
cd GuardianAI
```

### B∆∞·ªõc 3: C√†i ƒë·∫∑t c√°c Th∆∞ vi·ªán
T·∫•t c·∫£ c√°c th∆∞ vi·ªán c·∫ßn thi·∫øt ƒë√£ ƒë∆∞·ª£c li·ªát k√™ trong file `requirements.txt`. Ch·∫°y l·ªánh sau ƒë·ªÉ c√†i ƒë·∫∑t t·ª± ƒë·ªông:
```bash
pip install -r requirements.txt
```
*Qu√° tr√¨nh n√†y c√≥ th·ªÉ m·∫•t v√†i ph√∫t v√¨ n√≥ s·∫Ω t·∫£i c√°c model AI v√† th∆∞ vi·ªán l·ªõn.*

### B∆∞·ªõc 4: C·∫•u h√¨nh H·ªá th·ªëng
ƒê√¢y l√† b∆∞·ªõc quan tr·ªçng nh·∫•t. M·ªü file `config.py` b·∫±ng m·ªôt tr√¨nh so·∫°n th·∫£o code (nh∆∞ VS Code, Sublime Text) v√† ch·ªânh s·ª≠a c√°c th√¥ng s·ªë sau:

1.  **T√≠ch h·ª£p Telegram:**
    -   `TELEGRAM_TOKEN`: Token c·ªßa bot Telegram c·ªßa b·∫°n (l·∫•y t·ª´ **@BotFather**).
    -   `TELEGRAM_CHAT_ID`: ID c·ªßa cu·ªôc tr√≤ chuy·ªán (c√° nh√¢n ho·∫∑c nh√≥m) m√† b·∫°n mu·ªën bot g·ª≠i c·∫£nh b√°o.

2.  **T√≠ch h·ª£p AI (T√πy ch·ªçn):**
    -   `API_KEY`: D√°n API Key c·ªßa b·∫°n. (ƒê·ªëi v·ªõi d·ªãch v·ª• self-host kh√¥ng c·∫ßn key, c√≥ th·ªÉ ƒëi·ªÅn m·ªôt chu·ªói b·∫•t k·ª≥ nh∆∞ `"ollama"`).
    -   `API_BASE`: **Quan tr·ªçng!**
        -   ƒê·ªëi v·ªõi OpenAI ch√≠nh th·ª©c: `"https://api.openai.com/v1"`
         -   ƒê·ªëi v·ªõi Google Gemini: `"https://generativelanguage.googleapis.com/v1beta/openai/"`
        -   ƒê·ªëi v·ªõi LM Studio: `"http://localhost:1234/v1"`
        -   ƒê·ªëi v·ªõi Ollama (qua proxy nh∆∞ LiteLLM): `"http://localhost:8000"`
    -   `AI_MODEL`: T√™n model b·∫°n mu·ªën s·ª≠ d·ª•ng (v√≠ d·ª•: `"gpt-4o-mini"`, `"LM Studio Community/Meta-Llama-3-8B-Instruct-GGUF"`, `"gemini-2.5-flash"`).

3.  **Ngu·ªìn Video:**
    -   `IP_CAMERA_URL`: ƒê√¢y l√† ngu·ªìn video ƒë·∫ßu v√†o.
        -   ƒê·ªÉ d√πng webcam: `IP_CAMERA_URL = 0`
        -   ƒê·ªÉ d√πng camera IP: `IP_CAMERA_URL = "rtsp://user:pass@192.168.1.10:554/stream1"` (thay b·∫±ng URL c·ªßa b·∫°n).
        -   ƒê·ªÉ th·ª≠ nghi·ªám v·ªõi file video: `IP_CAMERA_URL = "test.mp4"` (thay b·∫±ng video c·ªßa b·∫°n)

### B∆∞·ªõc 5: Th√™m D·ªØ li·ªáu Khu√¥n m·∫∑t
- Ch·∫°y ch∆∞∆°ng tr√¨nh l·∫ßn ƒë·∫ßu, m·ªôt giao di·ªán ƒë·ªì h·ªça s·∫Ω hi·ªán ra.
- S·ª≠ d·ª•ng n√∫t **"Th√™m Ng∆∞·ªùi M·ªõi"** ƒë·ªÉ t·∫°o m·ªôt th∆∞ m·ª•c cho ng∆∞·ªùi quen v√† ch·ªçn ·∫£nh c·ªßa h·ªç. B·∫°n n√™n th√™m nhi·ªÅu ·∫£nh v·ªõi c√°c g√≥c m·∫∑t kh√°c nhau.
- Sau khi th√™m, nh·∫•n n√∫t **"X√¢y D·ª±ng L·∫°i T·∫•t C·∫£"**. H·ªá th·ªëng s·∫Ω qu√©t t·∫•t c·∫£ c√°c ·∫£nh, m√£ h√≥a khu√¥n m·∫∑t v√† l∆∞u v√†o file ƒë·ªÉ nh·∫≠n di·ªán sau n√†y.

### B∆∞·ªõc 6: Kh·ªüi ch·∫°y
Sau khi ho√†n t·∫•t c·∫•u h√¨nh, m·ªü Terminal/Command Prompt t·∫°i th∆∞ m·ª•c d·ª± √°n v√† ch·∫°y:
```bash
python main.py
```
H·ªá th·ªëng s·∫Ω b·∫Øt ƒë·∫ßu gi√°m s√°t. M·ªçi ho·∫°t ƒë·ªông, c·∫£nh b√°o s·∫Ω ƒë∆∞·ª£c ghi l·∫°i trong console v√† g·ª≠i ƒë·∫øn Telegram.

## üìÇ C·∫•u tr√∫c D·ª± √°n & Ngu·ªìn Module

D·ª± √°n ƒë∆∞·ª£c t·ªï ch·ª©c m·ªôt c√°ch logic ƒë·ªÉ d·ªÖ d√†ng b·∫£o tr√¨ v√† m·ªü r·ªông.

| File / Th∆∞ m·ª•c | C√¥ng d·ª•ng v√† Ngu·ªìn g·ªëc |
| :--- | :--- |
| **`main.py`** | **ƒêi·ªÉm kh·ªüi ƒë·∫ßu c·ªßa ch∆∞∆°ng tr√¨nh.** Ch·ªãu tr√°ch nhi·ªám kh·ªüi t·∫°o c√°c lu·ªìng (Bot, GUI, Camera), li√™n k·∫øt c√°c th√†nh ph·∫ßn v√† ch·∫°y v√≤ng l·∫∑p ph√°t hi·ªán ch√≠nh. |
| **`config.py`** | **File c·∫•u h√¨nh trung t√¢m.** Ch·ª©a t·∫•t c·∫£ c√°c th√¥ng s·ªë quan tr·ªçng nh∆∞ API keys, ƒë∆∞·ªùng d·∫´n, ng∆∞·ª°ng ph√°t hi·ªán, gi√∫p d·ªÖ d√†ng t√πy ch·ªânh h·ªá th·ªëng m√† kh√¥ng c·∫ßn s·ª≠a code. |
| **`detection_core.py`** | **B·ªô n√£o th·ªã gi√°c c·ªßa h·ªá th·ªëng.** T·∫£i v√† v·∫≠n h√†nh c√°c model AI (YOLO, InsightFace), x·ª≠ l√Ω t·ª´ng khung h√¨nh, theo d√µi ƒë·ªëi t∆∞·ª£ng (SORT tracker), v√† k√≠ch ho·∫°t callback khi c√≥ s·ª± ki·ªán. |
| **`telegram_bot.py`** | **C·∫ßu n·ªëi v·ªõi ng∆∞·ªùi d√πng.** X·ª≠ l√Ω t·∫•t c·∫£ logic c·ªßa Telegram Bot, bao g·ªìm nh·∫≠n l·ªánh, g·ª≠i c·∫£nh b√°o, t∆∞∆°ng t√°c v·ªõi n√∫t b·∫•m v√† t√≠ch h·ª£p v·ªõi c√°c API AI ƒë·ªÉ x·ª≠ l√Ω ng√¥n ng·ªØ t·ª± nhi√™n. |
| **`gui_manager.py`** | **Giao di·ªán qu·∫£n l√Ω d·ªØ li·ªáu.** X√¢y d·ª±ng b·∫±ng `customtkinter`, cung c·∫•p m·ªôt giao di·ªán ƒë·ªì h·ªça th√¢n thi·ªán ƒë·ªÉ ng∆∞·ªùi d√πng qu·∫£n l√Ω c∆° s·ªü d·ªØ li·ªáu khu√¥n m·∫∑t. |
| **`alarm_player.py`** | **Module ph√°t √¢m thanh.** S·ª≠ d·ª•ng `pygame` ƒë·ªÉ ph√°t c√≤i b√°o ƒë·ªông v·ªõi hi·ªáu ·ª©ng tƒÉng d·∫ßn √¢m l∆∞·ª£ng, ƒë·∫£m b·∫£o c·∫£nh b√°o ƒë·ªß l·ªõn nh∆∞ng kh√¥ng g√¢y s·ªëc. |
| **`video_recorder.py`** | **Module ghi h√¨nh.** Ch·ªãu tr√°ch nhi·ªám ghi l·∫°i c√°c clip video khi c√≥ s·ª± ki·ªán, x·ª≠ l√Ω n√©n (n·∫øu c√≥ `ffmpeg`) v√† g·ª≠i file l√™n Telegram. |
| **`shared_state.py`** | **Trung t√¢m chia s·∫ª tr·∫°ng th√°i.** M·ªôt gi·∫£i ph√°p quan tr·ªçng ƒë·ªÉ c√°c lu·ªìng (threads) kh√°c nhau c√≥ th·ªÉ truy c·∫≠p v√† thay ƒë·ªïi tr·∫°ng th√°i c·ªßa nhau m·ªôt c√°ch an to√†n. |
| **`state_manager.py`** | Qu·∫£n l√Ω tr·∫°ng th√°i logic c·ªßa ·ª©ng d·ª•ng, nh∆∞ c·∫£nh b√°o n√†o ƒëang ch·ªù ph·∫£n h·ªìi, t√≠nh nƒÉng nh·∫≠n di·ªán ƒëang b·∫≠t hay t·∫Øt. |
| **`spam_guard.py`** | M·ªôt b·ªô l·ªçc th√¥ng minh ƒë·ªÉ ch·ªëng spam c·∫£nh b√°o, tr√°nh g·ª≠i c√°c c·∫£nh b√°o tr√πng l·∫∑p ho·∫∑c qu√° d·ªìn d·∫≠p trong m·ªôt kho·∫£ng th·ªùi gian ng·∫Øn. |
| **`Data/`** | Th∆∞ m·ª•c ch·ª©a d·ªØ li·ªáu: `Model/` (c√°c model AI), `Image/` (·∫£nh ng∆∞·ªùi quen), `Audio/` (file √¢m thanh b√°o ƒë·ªông). |
| **`Lib/`** | Ch·ª©a c√°c th∆∞ vi·ªán ph·ª• tr·ª£ ƒë√£ ƒë∆∞·ª£c t√πy ch·ªânh ho·∫∑c kh√¥ng c√≥ s·∫µn tr√™n pip, nh∆∞ **InsightFace** v√† **SORT Tracker**. |
| **`requirements.txt`** | Danh s√°ch c√°c th∆∞ vi·ªán Python c·∫ßn thi·∫øt ƒë·ªÉ c√†i ƒë·∫∑t. |